{% extends 'base.html' %}

{% block title %}
  <title>{{ user.username }}/Dashboard</title>
{% endblock %}

{% block content %}

    
    <div>
    {% if current_tracks %}
        <h2>Your Current Goals: </h2>
        <!-- Show user's current goal tracks by goal name -->
        <ul style="list-style: none">
        {% for track in current_tracks %}
           <li><button id={{ track.track_id }} class="goal-btn" 
                data-toggle="modal" data-target="#goalModal">
                {{ track.goal.name }}</button>
           </li>
        {% endfor %}
        </ul>
    {% else %}
        <h2>You do not have any current goals.</h2>
    {% endif %}
        <div id="goalModal" class="modal fade" role="dialog">
          <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">{{ track.goal.name }}</h4>
              </div>
              <div class="modal-body">
                <p>Some text in the modal.</p>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              </div>
            </div>

          </div>
        </div>
    </div>

    <!-- Add a Goal Form -->
    <div>
    <h3 id="add_goal">Add a new goal</h3>

        <form id="add_goal_form" action="/add-goal.json" method="POST">
            Goal Name:
            <input type="text" id="new_goal_name" name="new_goal_name">
            <br>
            Goal Type:
            <input type="radio" id="goal_type" name="goal_type" value='P'>Push
            <input type="radio" id="goal_type" name="goal_type" value='L'>Limit
            <br>
            Amount to push for -or- limit to:
            <input type="number" id="num_times" name="num_times">
            <br>
            Duration:
            <input type="radio" id="duration" name="duration" value='1'>1 Week
            <input type="radio" id="duration" name="duration" value='4'>1 Month (4 weeks)
            <br>
            Start Date:
            <input type="text" id="start_date" name="start_date">
            <br>
            Check to Repeat:
            <input type="checkbox" id="repeat" name="repeat" value=True>
            <br>
            <input type="submit" value="Add Goal to Spire">
        </form>
    </div>

<script src="/static/js/goal-tracker.js"></script>

{% endblock %}